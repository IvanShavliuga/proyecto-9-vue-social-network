(function(t){function e(e){for(var a,o,i=e[0],l=e[1],c=e[2],d=0,f=[];d<i.length;d++)o=i[d],n[o]&&f.push(n[o][0]),n[o]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(t[a]=l[a]);u&&u(e);while(f.length)f.shift()();return s.push.apply(s,c||[]),r()}function r(){for(var t,e=0;e<s.length;e++){for(var r=s[e],a=!0,i=1;i<r.length;i++){var l=r[i];0!==n[l]&&(a=!1)}a&&(s.splice(e--,1),t=o(o.s=r[0]))}return t}var a={},n={app:0},s=[];function o(e){if(a[e])return a[e].exports;var r=a[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=t,o.c=a,o.d=function(t,e,r){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)o.d(r,a,function(e){return t[e]}.bind(null,a));return r},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],l=i.push.bind(i);i.push=e,i=i.slice();for(var c=0;c<i.length;c++)e(i[c]);var u=l;s.push([0,"chunk-vendors"]),r()})({0:function(t,e,r){t.exports=r("56d7")},"034f":function(t,e,r){"use strict";var a=r("04f5"),n=r.n(a);n.a},"04f5":function(t,e,r){},"21e9":function(t,e,r){},"56d7":function(t,e,r){"use strict";r.r(e);r("744f"),r("6c7b"),r("7514"),r("20d6"),r("1c4c"),r("6762"),r("cadf"),r("e804"),r("55dd"),r("d04f"),r("c8ce"),r("217b"),r("7f7f"),r("f400"),r("7f25"),r("536b"),r("d9ab"),r("f9ab"),r("32d7"),r("25c9"),r("9f3c"),r("042e"),r("c7c6"),r("f4ff"),r("049f"),r("7872"),r("a69f"),r("0b21"),r("6c1a"),r("c7c62"),r("84b4"),r("c5f6"),r("2e37"),r("fca0"),r("7cdf"),r("ee1d"),r("b1b1"),r("87f3"),r("9278"),r("5df2"),r("04ff"),r("f751"),r("4504"),r("fee7"),r("ffc1"),r("0d6d"),r("9986"),r("8e6e"),r("25db"),r("e4f7"),r("b9a1"),r("64d5"),r("9aea"),r("db97"),r("66c8"),r("57f0"),r("165b"),r("456d"),r("cf6a"),r("fd24"),r("8615"),r("551c"),r("097d"),r("df1b"),r("2397"),r("88ca"),r("ba16"),r("d185"),r("ebde"),r("2d34"),r("f6b3"),r("2251"),r("c698"),r("a19f"),r("9253"),r("9275"),r("3b2b"),r("3846"),r("4917"),r("a481"),r("28a5"),r("386d"),r("6b54"),r("4f7f"),r("8a81"),r("ac4d"),r("8449"),r("9c86"),r("fa83"),r("48c0"),r("a032"),r("aef6"),r("d263"),r("6c37"),r("9ec8"),r("5695"),r("2fdb"),r("d0b0"),r("b54a"),r("f576"),r("ed50"),r("788d"),r("14b9"),r("f386"),r("f559"),r("1448"),r("673e"),r("242a"),r("c66f"),r("b05c"),r("34ef"),r("6aa2"),r("15ac"),r("af56"),r("b6e4"),r("9c29"),r("63d9"),r("4dda"),r("10ad"),r("c02b"),r("4795"),r("130f"),r("ac6a"),r("96cf");var a=r("2b0e"),n=r("ce5b"),s=r.n(n);r("bf40");a["default"].use(s.a,{theme:{primary:"#902923",secondary:"#03A9F4",accent:"#EC9A29",error:"#B71C1C",warning:"#ffeb3b",info:"#2196f3",success:"#8BC34A"}});var o=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-app",{staticStyle:{background:"#EAEAEA"}},[r("v-navigation-drawer",{attrs:{app:"",temporary:"",fixed:""},model:{value:t.sideNav,callback:function(e){t.sideNav=e},expression:"sideNav"}},[r("v-toolbar",{attrs:{color:"accent",dark:"",flat:""}},[r("v-toolbar-side-icon",{on:{click:t.toggleSideNav}}),r("router-link",{staticStyle:{cursor:"pointer"},attrs:{to:"/",tag:"span"}},[r("h1",{staticClass:"title pl-3"},[t._v("\n          Red social\n        ")])])],1),r("v-divider"),r("v-list",[t._l(t.itemsOfSideNav,function(e){return r("v-list-tile",{key:e.title,attrs:{ripple:"",to:e.link}},[r("v-list-tile-action",[r("v-icon",[t._v(t._s(e.icon))])],1),r("v-list-tile-content",[t._v(t._s(e.title))])],1)}),t.user?r("v-list-tile",{on:{click:t.handleSignOutUser}},[r("v-list-tile-action",[r("v-icon",{attrs:{center:""}},[t._v("exit_to_app")])],1),r("v-list-tile-content",[t._v("Salir")])],1):t._e()],2)],1),r("v-toolbar",{attrs:{fixed:"",color:"primary",dark:""}},[r("v-toolbar-side-icon",{staticClass:"hidden-md-only hidden-lg-only",on:{click:t.toggleSideNav}}),r("v-toolbar-title",{staticClass:"hidden-sm-only hidden-xs-only"},[r("router-link",{staticStyle:{cursor:"pointer"},attrs:{to:"/",tag:"span"}},[t._v("Red social")])],1),r("v-spacer"),r("v-toolbar-items",{staticClass:"mr-md-4 mr-0 hidden-xs-only"},[t._l(t.itemsOfNav,function(e){return r("v-btn",{key:e.title,attrs:{flat:"",to:e.link}},[r("v-icon",{attrs:{center:""}},[t._v(t._s(e.icon))])],1)}),t.user?r("v-btn",{attrs:{flat:"",to:"/profile"}},[r("v-icon",{attrs:{center:""}},[t._v("account_box")]),r("v-badge",{attrs:{right:"",color:"blue darken-2"}})],1):t._e()],2),r("v-text-field",{attrs:{"prepend-icon":"search",flex:"",placeholder:"Buscar publicaciones",color:"accent","single-line":"","hide-details":""}}),r("v-toolbar-items",{staticClass:"mr-md-4 mr-0 hidden-xs-only"},[t.user?r("v-btn",{attrs:{flat:""},on:{click:t.handleSignOutUser}},[r("v-icon",{attrs:{center:""}},[t._v("exit_to_app")])],1):t._e()],1)],1),r("main",[r("v-container",{staticClass:"fluid mt-5"},[r("transition",{attrs:{name:"fade"}},[r("router-view")],1),t.authError?r("v-snackbar",{attrs:{color:"error",bottom:"",left:"",timeout:5e3},model:{value:t.authErrorSnackbar,callback:function(e){t.authErrorSnackbar=e},expression:"authErrorSnackbar"}},[r("v-icon",{staticClass:"mt5"},[t._v("cancel")]),r("h3",[t._v("Tu sesión ha expirado, inicia sesión para continuar")]),r("v-btn",{attrs:{dark:"",flat:"",to:"/signin"}},[t._v("\n          Ingresar\n        ")])],1):t._e()],1)],1)],1)},i=[],l=r("c93e"),c=r("2f62"),u={name:"App",data:function(){return{sideNav:!1,authSnackbar:!1,authErrorSnackbar:!1}},watch:{user:function(t,e){null===e&&(this.authSnackbar=!0)},authError:function(t){null!==t&&(this.authErrorSnackbar=!0)}},computed:Object(l["a"])({},Object(c["b"])(["authError","user"]),{itemsOfNav:function(){var t=[{icon:"photo_library",title:"Publicaciones",link:"/posts"},{icon:"input",title:"Ingresar",link:"/signin"},{icon:"person_add",title:"Registrarse",link:"/signup"}];return this.user&&(t=[{icon:"photo_library",title:"Publicaciones",link:"/posts"},{icon:"add_photo_alternate",title:"Nueva publicación",link:"/posts/add"}]),t},itemsOfSideNav:function(){var t=[{icon:"photo_library",title:"Publicaciones",link:"/posts"},{icon:"input",title:"Ingresar",link:"/signin"},{icon:"person_add",title:"Registrarse",link:"/signup"}];return this.user&&(t=t=[{icon:"photo_library",title:"Publicaciones",link:"/posts"},{icon:"add_photo_alternate",title:"Nueva publicación",link:"/posts/add"},{icon:"account_circle",title:"Perfil",link:"/profile"}]),t}}),methods:{toggleSideNav:function(){this.sideNav=!this.sideNav},handleSignOutUser:function(){this.$store.dispatch("signoutUser")}}},d=u,f=(r("034f"),r("2877")),p=Object(f["a"])(d,o,i,!1,null,null,null);p.options.__file="App.vue";var m=p.exports,v=r("8c4f"),g=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-container",{attrs:{fluid:"","grid-list-md":""}},[r("h1",[t._v("Inicio")]),r("v-layout",{attrs:{row:""}},[r("v-dialog",{attrs:{persistent:"",fullscreen:""},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},[r("v-container",{attrs:{"fill-height":""}},[r("v-layout",{attrs:{row:"","justify-center":"","align-center":""}},[r("v-progress-circular",{attrs:{indeterminate:"",size:50,width:6,color:"accent"}})],1)],1)],1)],1),!t.loading&&t.posts.length>0?r("v-layout",{attrs:{row:"",wrap:""}},t._l(t.posts,function(e){return r("v-flex",{key:e._id,attrs:{"d-flex":"",xs12:"",sm6:"",md4:""}},[r("v-card",{staticClass:"mt-3",attrs:{hover:""}},[r("v-card-media",{attrs:{src:e.imageUrl,height:"200px",width:"100%"},nativeOn:{click:function(r){t.goToPost(e._id)}}}),r("v-card-title",[r("div",[r("strong",[t._v(t._s(e.title))]),r("br"),r("span",[t._v(t._s(e.description))])])])],1)],1)})):t._e()],1)},h=[],b={name:"home",created:function(){this.handleHomePosts()},computed:{posts:function(){return this.$store.getters.posts},loading:function(){return this.$store.getters.loading}},methods:{goToPost:function(t){this.$router.push("/posts/".concat(t))},handleHomePosts:function(){this.$store.dispatch("getPosts")}}},_=b,y=Object(f["a"])(_,g,h,!1,null,null,null);y.options.__file="Home.vue";var x=y.exports,w=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-container",{attrs:{fluid:"","text-md-center":""}},[r("v-layout",{attrs:{row:"",wrap:"","mt-3":""}},[r("v-flex",{attrs:{xs12:"",sm8:"","offset-sm2":""}},[r("h2",[t._v("Crea una nueva publicación")])])],1),r("v-layout",{attrs:{row:"",wrpa:"","mt-3":""}},[r("v-flex",{attrs:{xs12:"",sm6:"","offset-sm3":""}},[r("v-form",{ref:"form",attrs:{"lazy-validation":""},on:{submit:function(e){return e.preventDefault(),t.handleaddPost(e)}},model:{value:t.isValidForm,callback:function(e){t.isValidForm=e},expression:"isValidForm"}},[r("v-layout",{attrs:{row:"","mt-3":""}},[r("v-flex",{attrs:{xs12:""}},[r("v-text-field",{attrs:{rules:t.titleRules,"prepend-icon":"border_color",label:"Título",type:"text"},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}})],1)],1),r("v-layout",{attrs:{row:"","mt-3":""}},[r("v-flex",{attrs:{xs12:""}},[r("v-text-field",{attrs:{rules:t.urlImageRules,"prepend-icon":"insert_link",label:"URL de la imagen",type:"text"},model:{value:t.urlImage,callback:function(e){t.urlImage=e},expression:"urlImage"}})],1)],1),r("v-layout",{attrs:{row:""}},[r("v-flex",{attrs:{xs12:""}},[r("img",{attrs:{src:t.urlImage,height:"300px"}})])],1),r("v-layout",{attrs:{row:""}},[r("v-flex",{attrs:{xs12:""}},[r("v-select",{attrs:{rules:t.categoriesRules,items:["Vacaciones ","Playa ","Bosque","Familiar","Aniversario","Luna de miel","Paisaje","Relax","Extranjero","Aventura","Tour"],multiple:"",label:"Categorías","prepend-icon":"loyalty"},model:{value:t.categories,callback:function(e){t.categories=e},expression:"categories"}})],1)],1),r("v-layout",{attrs:{row:""}},[r("v-flex",{attrs:{xs12:""}},[r("v-textarea",{attrs:{"auto-grow":"",rules:t.descriptionRules,"prepend-icon":"notes",label:"Descripción",type:"text"},model:{value:t.description,callback:function(e){t.description=e},expression:"description"}})],1)],1),r("v-layout",{attrs:{row:"","mt-3":""}},[r("v-flex",{attrs:{xs12:""}},[r("v-btn",{attrs:{loading:t.loading,disabled:!t.isValidForm||t.loading,color:"accent",type:"submit",light:""}},[r("span",{staticClass:"custom-loader",attrs:{slot:"loader"},slot:"loader"},[r("v-icon",{attrs:{light:""}},[t._v("loop")])],1),t._v("\n              Publicar\n            ")])],1)],1)],1)],1)],1)],1)},k=[],P={name:"AddPost",data:function(){return{isValidForm:!0,title:"",urlImage:"",categories:[],description:"",titleRules:[function(t){return!!t||"Completa este campo"},function(t){return t.length<30||"El título debe tener menos de 30 caracteres"}],descriptionRules:[function(t){return!!t||"Completa este campo"},function(t){return t.length<200||"El título debe tener menos de 200 caracteres"}],urlImageRules:[function(t){return!!t||"Completa este campo"}],categoriesRules:[function(t){return t.length>=1||"Debes marcar al menos una categoría"}]}},computed:Object(l["a"])({},Object(c["b"])(["loading","user"])),methods:{handleaddPost:function(){this.$refs.form.validate()&&(this.$store.dispatch("addPost",{title:this.title,imageUrl:this.urlImage,categories:this.categories,description:this.description,creatorId:this.user._id}),this.$router.push("/"))}}},S=P,$=Object(f["a"])(S,w,k,!1,null,null,null);$.options.__file="AddPost.vue";var O=$.exports,C=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-container",{attrs:{fluid:"","grid-list-xl":""}},[t.infiniteScrollPosts?r("v-layout",{attrs:{row:"",wrap:""}},t._l(t.infiniteScrollPosts.posts,function(e){return r("v-flex",{key:e._id,attrs:{xs12:"",sm4:""}},[r("v-card",{attrs:{hover:""}},[r("v-card-media",{attrs:{src:e.imageUrl,height:"30vh",lazy:""},nativeOn:{click:function(r){t.goToPost(e._id)}}}),r("v-card-actions",[r("v-card-title",{attrs:{primary:""}},[r("div",[r("div",{staticClass:"headline"},[t._v(t._s(e.title))]),r("span",{staticClass:"grey--text"},[t._v(t._s(e.likes)+" likes - "+t._s(e.messages.length)+" comentarios")])])]),r("v-spacer")],1),r("v-divider",{attrs:{light:""}}),r("v-card-actions",{staticClass:"pa-3"},[r("img",{attrs:{src:e.createdBy.avatar,height:"30"}}),r("span",{staticClass:"grey--text ml-2"},[t._v(t._s(e.createdBy.username))]),r("v-spacer"),r("v-btn",{attrs:{icon:"",ripple:""}},[r("v-icon",{attrs:{color:"grey lighten-1"}},[t._v("info")])],1)],1)],1)],1)})):t._e(),t.showMoreEnabled?r("v-layout",{attrs:{column:""}},[r("v-flex",{attrs:{xs12:""}},[r("v-layout",{attrs:{"justify-center":"",row:""}},[r("v-btn",{attrs:{color:"primary"},on:{click:t.showMorePosts}},[t._v("Cargar más")])],1)],1)],1):t._e()],1)},j=[],I=r("8afe"),E=r("6eec"),U=r("23ee"),R=r.n(U);function q(){var t=Object(E["a"])(["\n  mutation($username: String!, $email: String!, $password: String!) {\n    signupUser(username: $username, email: $email, password: $password) {\n      token\n    }\n  }\n"]);return q=function(){return t},t}function N(){var t=Object(E["a"])(["\n  mutation($username: String!, $password: String!) {\n    signinUser(username: $username, password: $password) {\n      token\n    }\n  }\n"]);return N=function(){return t},t}function M(){var t=Object(E["a"])(["\n  query {\n    getCurrentUser {\n      _id\n      username\n      email\n      password\n      avatar\n      joinDate\n      favorites {\n        _id\n        title\n        imageUrl\n      }\n    }\n  }\n"]);return M=function(){return t},t}function A(){var t=Object(E["a"])(["\n  mutation($messageBody: String!, $userId: ID!, $postId: ID!) {\n    addPostMessage(\n      messageBody: $messageBody\n      userId: $userId\n      postId: $postId\n    ) {\n      _id\n      messageBody\n      messageDate\n      messageUser {\n        _id\n        username\n        avatar\n      }\n    }\n  }\n"]);return A=function(){return t},t}function B(){var t=Object(E["a"])(["\n  mutation(\n    $title: String!\n    $imageUrl: String!\n    $categories: [String]!\n    $description: String!\n    $creatorId: ID!\n  ) {\n    addPost(\n      title: $title\n      imageUrl: $imageUrl\n      categories: $categories\n      description: $description\n      creatorId: $creatorId\n    ) {\n      _id\n      title\n      imageUrl\n      categories\n      description\n    }\n  }\n"]);return B=function(){return t},t}function L(){var t=Object(E["a"])(["\n  query($pageNum: Int!, $pageSize: Int!) {\n    infiniteScrollPosts(pageNum: $pageNum, pageSize: $pageSize) {\n      hasMore\n      posts {\n        _id\n        title\n        imageUrl\n        categories\n        description\n        likes\n        createdDate\n        messages {\n          _id\n        }\n        createdBy {\n          _id\n          username\n          avatar\n        }\n      }\n    }\n  }\n"]);return L=function(){return t},t}function D(){var t=Object(E["a"])(["\n  query($postId: ID!) {\n    getPost(postId: $postId) {\n      _id\n      title\n      imageUrl\n      categories\n      description\n      likes\n      createdDate\n      messages {\n        _id\n        messageBody\n        messageDate\n        messageUser {\n          _id\n          username\n          avatar\n        }\n      }\n    }\n  }\n"]);return D=function(){return t},t}function F(){var t=Object(E["a"])(["\n  query {\n    getPosts {\n      _id\n      title\n      imageUrl\n      description\n      likes\n    }\n  }\n"]);return F=function(){return t},t}var V=Object(U["gql"])(F()),T=Object(U["gql"])(D()),z=Object(U["gql"])(L()),Q=Object(U["gql"])(B()),H=Object(U["gql"])(A()),J=Object(U["gql"])(M()),G=Object(U["gql"])(N()),W=Object(U["gql"])(q()),Y=3,K={name:"Posts",data:function(){return{pageNum:1,showMoreEnabled:!0}},apollo:{infiniteScrollPosts:{query:z,variables:{pageNum:1,pageSize:Y}}},methods:{goToPost:function(t){this.$router.push("/posts/".concat(t))},showMorePosts:function(){var t=this;this.pageNum+=1,this.$apollo.queries.infiniteScrollPosts.fetchMore({variables:{pageNum:this.pageNum,pageSize:Y},updateQuery:function(e,r){var a=r.fetchMoreResult;console.log("previous result",e.infiniteScrollPosts.posts),console.log("fetch more result",a);var n=a.infiniteScrollPosts.posts,s=a.infiniteScrollPosts.hasMore;return t.showMoreEnabled=s,{infiniteScrollPosts:{__typename:e.infiniteScrollPosts.__typename,posts:Object(I["a"])(e.infiniteScrollPosts.posts).concat(Object(I["a"])(n)),hasMore:s}}}})}}},X=K,Z=Object(f["a"])(X,C,j,!1,null,null,null);Z.options.__file="Posts.vue";var tt=Z.exports,et=function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.getPost?r("v-container",{staticClass:"mt-3",attrs:{flexbox:"",center:"",fluid:""}},[r("v-layout",{attrs:{row:"",wrap:""}},[r("v-flex",{attrs:{xs12:"",sm10:"","offset-sm1":""}},[r("v-card",{attrs:{hover:""}},[r("v-tooltip",{attrs:{right:""}},[r("v-icon",{attrs:{dark:""}},[t._v("zoom_out_map")]),r("v-card-media",{attrs:{slot:"activator",src:t.getPost.imageUrl,id:"post__image"},on:{click:t.toggleImageDialog},slot:"activator"})],1),r("v-card-title",[r("h1",[t._v(t._s(t.getPost.title))]),t.user?r("v-btn",{attrs:{large:"",icon:""}},[r("v-icon",{attrs:{large:"",color:"grey"}},[t._v("stars")])],1):t._e(),r("v-icon",{attrs:{large:"",color:"grey"}},[t._v("thumb_up")]),r("h2",{staticClass:"ml-3 font-weight-medium grey--text"},[t._v(t._s(t.getPost.likes))]),r("v-spacer"),r("v-icon",{attrs:{color:"grey",large:""},on:{click:t.goToPreviousPage}},[t._v("arrow_back")])],1),r("v-dialog",{model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[r("v-card",[r("v-card-media",{attrs:{src:t.getPost.imageUrl,height:"80vh"}})],1)],1),r("v-card-text",[t._l(t.getPost.categories,function(e,a){return r("span",{key:a},[r("v-chip",{staticClass:"mb-3",attrs:{color:"accent","text-color":"white"}},[r("v-icon",{attrs:{left:"",small:""}},[t._v("loyalty")]),t._v(t._s(e)+"\n            ")],1)],1)}),r("h3",{staticClass:"font-weight-medium"},[t._v(t._s(t.getPost.description))])],2)],1)],1)],1),r("div",{staticClass:"mt-3"},[t.user?r("v-layout",{staticClass:"mb-3"},[r("v-flex",{attrs:{xs12:"",sm8:"","offset-sm1":""}},[r("v-form",{on:{submit:function(e){return e.preventDefault(),t.handleAddPostMessage(e)}}},[r("v-layout",{attrs:{row:""}},[r("v-flex",{attrs:{xs12:""}},[r("v-text-field",{attrs:{clearable:"","append-outer-icon":t.messageBody&&"send",label:"Comentar",type:"text","prepend-icon":"email",required:""},on:{"click:append-outer":t.handleAddPostMessage},model:{value:t.messageBody,callback:function(e){t.messageBody=e},expression:"messageBody"}})],1)],1)],1)],1)],1):t._e(),r("v-layout",{attrs:{row:"",wrap:""}},[r("v-flex",{attrs:{xs12:"",sm8:"","offset-sm1":""}},[r("v-list",{attrs:{subheader:"","two-line":""}},[r("v-subheader",[t._v("Comentarios ("+t._s(t.getPost.messages.length)+")")]),t._l(t.getPost.messages,function(e){return[r("v-divider",{key:e._id}),r("v-list-tile",{key:e.title,attrs:{avatar:"",inset:""}},[r("v-list-tile-avatar",[r("img",{attrs:{src:e.messageUser.avatar}})]),r("v-list-tile-content",[r("v-list-tile-title",[t._v("\n                  "+t._s(e.messageBody)+"\n                ")]),r("v-list-tile-sub-title",[t._v("\n                  "+t._s(e.messageUser.username)+"\n                  "),r("span",{staticClass:"grey--text text--lighten-1 hidden-xs-only"},[t._v(t._s(e.messageDate))])])],1),r("v-list-tile-action",{staticClass:"hidden-xs-only"},[r("v-icon",{attrs:{color:"grey"}},[t._v("chat_bubble")])],1)],1)]})],2)],1)],1)],1)],1):t._e()},rt=[],at={name:"Post",props:["postId"],data:function(){return{dialog:!1,messageBody:""}},apollo:{getPost:{query:T,variables:function(){return{postId:this.postId}}}},computed:Object(l["a"])({},Object(c["b"])(["user"])),methods:{handleAddPostMessage:function(){var t=this,e={messageBody:this.messageBody,userId:this.user._id,postId:this.postId};this.$apollo.mutate({mutation:H,variables:e,update:function(e,r){var a=r.data.addPostMessage,n=e.readQuery({query:T,variables:{postId:t.postId}});n.getPost.messages.unshift(a),e.writeQuery({query:T,variables:{postId:t.postId},data:n})}}).then(function(t){var e=t.data;console.log(e.addPostMessage)}).catch(function(t){return console.error(t)})},goToPreviousPage:function(){this.$router.go(-1)},toggleImageDialog:function(){window.innerWidth>500&&(this.dialog=!this.dialog)}}},nt=at,st=(r("c1e6"),Object(f["a"])(nt,et,rt,!1,null,"1f5b2451",null));st.options.__file="Post.vue";var ot=st.exports,it=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-container",{attrs:{fluid:""}},[r("h1",[t._v("Perfil")])])},lt=[],ct={name:"Profile"},ut=ct,dt=Object(f["a"])(ut,it,lt,!1,null,null,null);dt.options.__file="Profile.vue";var ft=dt.exports,pt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-container",{attrs:{fluid:"","text-md-center":""}},[t.error?r("v-layout",{attrs:{row:"",wrap:""}},[r("v-flex",{attrs:{xs12:"",sm8:"","offset-sm2":""}},[r("form-alert",{attrs:{message:t.error.message}})],1)],1):t._e(),r("v-layout",{attrs:{row:"",wrpa:"","mt-3":""}},[r("v-flex",{attrs:{xs12:"",sm8:"","offset-sm2":""}},[r("v-card",{attrs:{color:"accent",dark:""}},[r("v-container",[r("v-form",{ref:"form",attrs:{"lazy-validation":""},on:{submit:function(e){return e.preventDefault(),t.handleSigninUser(e)}},model:{value:t.isValidForm,callback:function(e){t.isValidForm=e},expression:"isValidForm"}},[r("v-layout",{attrs:{row:"","mt-3":""}},[r("v-flex",{attrs:{xs12:""}},[r("v-text-field",{attrs:{rules:t.usernameRules,"prepend-icon":"person_pin",label:"Usuario",type:"text"},model:{value:t.username,callback:function(e){t.username=e},expression:"username"}})],1)],1),r("v-layout",{attrs:{row:"","mt-3":""}},[r("v-flex",{attrs:{xs12:""}},[r("v-text-field",{attrs:{rules:t.passwordRules,"prepend-icon":"vpn_key",label:"Contraseña",type:"password"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1)],1),r("v-layout",{attrs:{row:"","mt-3":""}},[r("v-flex",{attrs:{xs12:""}},[r("v-btn",{attrs:{loading:t.loading,disabled:!t.isValidForm||t.loading,color:"primary",type:"submit"}},[r("span",{staticClass:"custom-loader",attrs:{slot:"loader"},slot:"loader"},[r("v-icon",{attrs:{light:""}},[t._v("loop")])],1),t._v("\n                  Ingresar\n                ")]),r("p",{staticClass:"mt-2"},[t._v("¿No tienes cuenta?\n                  "),r("router-link",{attrs:{to:"/signup"}},[t._v("Regístrate")])],1)],1)],1)],1)],1)],1)],1)],1)],1)},mt=[],vt={name:"Signin",data:function(){return{isValidForm:!0,username:"",password:"",usernameRules:[function(t){return!!t||"Completa este campo"},function(t){return t.length<15||"El usuario debe tener menos de 15 caracteres"}],passwordRules:[function(t){return!!t||"Completa este campo"},function(t){return t.length>5||"La contraseña debe tener más de 5 caracteres"}]}},computed:Object(l["a"])({},Object(c["b"])(["loading","user","error"])),watch:{user:function(t){t&&this.$router.push("/")}},methods:{handleSigninUser:function(){this.$refs.form.validate()&&this.$store.dispatch("signinUser",{username:this.username,password:this.password})}}},gt=vt,ht=(r("56e8"),Object(f["a"])(gt,pt,mt,!1,null,null,null));ht.options.__file="Signin.vue";var bt=ht.exports,_t=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-container",{attrs:{fluid:"","text-md-center":""}},[t.error?r("v-layout",{attrs:{row:"",wrap:""}},[r("v-flex",{attrs:{xs12:"",sm8:"","offset-sm2":""}},[r("form-alert",{attrs:{message:t.error.message}})],1)],1):t._e(),r("v-layout",{attrs:{row:"",wrpa:"","mt-3":""}},[r("v-flex",{attrs:{xs12:"",sm8:"","offset-sm2":""}},[r("v-card",{attrs:{color:"secondary",dark:""}},[r("v-container",[r("v-form",{ref:"form",attrs:{"lazy-validation":""},on:{submit:function(e){return e.preventDefault(),t.handleSignupUser(e)}},model:{value:t.isValidForm,callback:function(e){t.isValidForm=e},expression:"isValidForm"}},[r("v-layout",{attrs:{row:"","mt-3":""}},[r("v-flex",{attrs:{xs12:""}},[r("v-text-field",{attrs:{rules:t.usernameRules,"prepend-icon":"person_pin",label:"Usuario",type:"text"},model:{value:t.username,callback:function(e){t.username=e},expression:"username"}})],1)],1),r("v-layout",{attrs:{row:"","mt-3":""}},[r("v-flex",{attrs:{xs12:""}},[r("v-text-field",{attrs:{rules:t.emailRules,"prepend-icon":"mail",label:"Correo",type:"email"},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}})],1)],1),r("v-layout",{attrs:{row:"","mt-3":""}},[r("v-flex",{attrs:{xs12:""}},[r("v-text-field",{attrs:{rules:t.passwordRules,"prepend-icon":"vpn_key",label:"Contraseña",type:"password"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1)],1),r("v-layout",{attrs:{row:"","mt-3":""}},[r("v-flex",{attrs:{xs12:""}},[r("v-text-field",{attrs:{rules:t.passwordRules,"prepend-icon":"vpn_key",label:"Confirmar contraseña",type:"password"},model:{value:t.passwordConfirmation,callback:function(e){t.passwordConfirmation=e},expression:"passwordConfirmation"}})],1)],1),r("v-layout",{attrs:{row:"","mt-3":""}},[r("v-flex",{attrs:{xs12:""}},[r("v-btn",{attrs:{loading:t.loading,disabled:!t.isValidForm||t.loading,color:"primary",type:"submit"}},[r("span",{staticClass:"custom-loader",attrs:{slot:"loader"},slot:"loader"},[r("v-icon",{attrs:{light:""}},[t._v("loop")])],1),t._v("\n                  Regístrate\n                ")]),r("p",{staticClass:"mt-2"},[t._v("¿Ya tienes una cuenta?\n                  "),r("router-link",{attrs:{to:"/signin"}},[t._v("Iniciar sesión")])],1)],1)],1)],1)],1)],1)],1)],1)],1)},yt=[],xt={name:"Signup",data:function(){var t=this;return{isValidForm:!0,username:"",email:"",password:"",passwordConfirmation:"",usernameRules:[function(t){return!!t||"Completa este campo"},function(t){return t.length<15||"El usuario debe tener menos de 15 caracteres"}],emailRules:[function(t){return!!t||"Completa este campo"},function(t){return/.@+./.test(t)||"Ingresa un correo válido"}],passwordRules:[function(t){return!!t||"Completa este campo"},function(t){return t.length>5||"La contraseña debe tener más de 5 caracteres"},function(e){return e===t.password||"Las contraseñas deben ser iguales"}]}},computed:Object(l["a"])({},Object(c["b"])(["loading","error","user"])),watch:{user:function(t){t&&this.$router.push("/")}},methods:{handleSignupUser:function(){this.$refs.form.validate()&&this.$store.dispatch("signupUser",{username:this.username,email:this.email,password:this.password})}}},wt=xt,kt=Object(f["a"])(wt,_t,yt,!1,null,null,null);kt.options.__file="Signup.vue";var Pt=kt.exports,St=r("a34a"),$t=r.n(St),Ot=r("3040");a["default"].use(c["a"]);var Ct=new c["a"].Store({state:{posts:[],user:null,loading:!1,error:null,authError:null},mutations:{setPosts:function(t,e){t.posts=e},setUser:function(t,e){t.user=e},setLoading:function(t,e){t.loading=e},clearUser:function(t){t.user=null},setError:function(t,e){t.error=e},clearError:function(t){t.error=null},setAuthError:function(t,e){t.authError=e}},actions:{getCurrentUser:function(t){var e=t.commit;e("setLoading",!0),Bt.query({query:J}).then(function(t){var r=t.data;e("setLoading",!1),e("setUser",r.getCurrentUser)}).catch(function(t){e("setLoading",!1),console.log(t)})},getPosts:function(t){var e=t.commit;e("setLoading",!0),Bt.query({query:V}).then(function(t){var r=t.data;e("setPosts",r.getPosts),e("setLoading",!1)}).catch(function(t){e("setLoading",!1),console.log(t)})},addPost:function(t,e){t.commit;Bt.mutate({mutation:Q,variables:e,update:function(t,e){var r=e.data.addPost,a=t.readQuery({query:GET_POST});a.getPosts.unshift(r),t.readQuery({query:V,data:a})},optimisticResponse:Object(l["a"])({__typename:"Mutation",_id:-1},e)}).then(function(t){var e=t.data;console.log(e.addPost)}).catch(function(t){console.log(t)})},signinUser:function(t,e){var r=t.commit;r("clearError"),r("setLoading",!0),Bt.mutate({mutation:G,variables:e}).then(function(t){var e=t.data;r("setLoading",!1),localStorage.setItem("token",e.signinUser.token),It.go()}).catch(function(t){r("setLoading",!1),r("setError",t),console.log(t)})},signupUser:function(t,e){var r=t.commit;r("clearError"),r("setLoading",!0),Bt.mutate({mutation:W,variables:e}).then(function(t){var e=t.data;r("setLoading",!1),localStorage.setItem("token",e.signupUser.token),It.go()}).catch(function(t){r("setLoading",!1),r("setError",t),console.log(t)})},signoutUser:function(){var t=Object(Ot["a"])($t.a.mark(function t(e){var r;return $t.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return r=e.commit,r("clearUser"),localStorage.setItem("token",""),t.next=5,Bt.resetStore();case 5:It.push("/");case 6:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},getters:{posts:function(t){return t.posts},loading:function(t){return t.loading},user:function(t){return t.user},error:function(t){return t.error},authError:function(t){return t.authError}}}),jt=function(t,e,r){Ct.getters.user?r():r({path:"/signin"})};a["default"].use(v["a"]);var It=new v["a"]({mode:"history",base:"/",routes:[{path:"/",name:"home",component:x},{path:"/posts",name:"Posts",component:tt},{path:"/posts/add",name:"AddPost",component:O},{path:"/posts/:postId",name:"Post",component:ot,props:!0},{path:"/profile",name:"Profile",component:ft,beforeEnter:jt},{path:"/signin",name:"Signin",component:bt},{path:"/Signup",name:"Signup",component:Pt}]}),Et=r("522d"),Ut=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-alert",{attrs:{type:"error",value:!0,dismissible:"",transition:"scale-transition"}},[r("h4",[t._v(t._s(t.message))])])},Rt=[],qt={props:["message"]},Nt=qt,Mt=Object(f["a"])(Nt,Ut,Rt,!1,null,null,null);Mt.options.__file="FormAlert.vue";var At=Mt.exports;r.d(e,"defaultClient",function(){return Bt}),a["default"].component("form-alert",At),a["default"].use(Et["a"]);var Bt=new R.a({uri:"https://fullstack-vue-graphql-starter-rusbzudmsk.now.sh/graphql",fetchOptions:{credentials:"include"},request:function(t){localStorage.token||localStorage.setItem("token",""),t.setContext({headers:{authorization:localStorage.getItem("token")}})},onError:function(t){var e=t.graphQLErrors,r=t.networkError;if(r&&console.log("[netwotkError]",r),e){var a=!0,n=!1,s=void 0;try{for(var o,i=e[Symbol.iterator]();!(a=(o=i.next()).done);a=!0){var l=o.value;console.log(l),"AuthenticationError"===l.name&&(Ct.commit("setAuthError",l),Ct.dispatch("singoutUser"))}}catch(t){n=!0,s=t}finally{try{a||null==i.return||i.return()}finally{if(n)throw s}}}}}),Lt=new Et["a"]({defaultClient:Bt});a["default"].config.productionTip=!1,new a["default"]({provide:Lt.provide(),router:It,store:Ct,render:function(t){return t(m)},created:function(){this.$store.dispatch("getCurrentUser")}}).$mount("#app")},"56e8":function(t,e,r){"use strict";var a=r("21e9"),n=r.n(a);n.a},c1e6:function(t,e,r){"use strict";var a=r("ff78"),n=r.n(a);n.a},ff78:function(t,e,r){}});
//# sourceMappingURL=app.7df57835.js.map